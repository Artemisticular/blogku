---
import VideoAccessForm from "../components/widget/VideoAccessForm.svelte";
import VideoPlayer from "../components/widget/VideoPlayer.astro";
import { videoConfig } from "../config";
import I18nKey from "../i18n/i18nKey";
import { i18n } from "../i18n/translation";
import MainGridLayout from "../layouts/MainGridLayout.astro";

// Urutkan video berdasarkan tanggal terbaru
const sortedVideos = [...videoConfig.videos].sort(
	(a, b) => b.published.getTime() - a.published.getTime(),
);
---

<MainGridLayout title="Video" description="Koleksi video eksklusif">
    <div class="flex w-full rounded-[var(--radius-large)] overflow-hidden relative">
        <div class="card-base z-10 px-6 md:px-9 py-6 relative w-full">
            <h1 class="text-3xl font-bold mb-6">Video Eksklusif</h1>
            
            <VideoAccessForm>
                <div class="space-y-6">
                    {sortedVideos.map((video) => (
                        <VideoPlayer
                            title={video.title}
                            description={video.description}
                            doodstreamId={video.doodstreamId}
                            thumbnail={video.thumbnail}
                            published={video.published}
                        />
                    ))}
                </div>
            </VideoAccessForm>
        </div>
    </div>
</MainGridLayout> 